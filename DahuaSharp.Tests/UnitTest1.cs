using System;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.IO;
using DahuaSharp.Packets;

namespace DahuaSharp.Tests
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void CaptureRequest_1()
        {
            var bytes = new byte[]{ 0x11, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00 };

            CaptureRequest r = new CaptureRequest(1);
            byte[] bytes2;

            using (var ms = new MemoryStream())
            {

                r.Serialize(ms);
                ms.Position = 0;

                bytes2 = ms.ToArray();

                var d = BinarySerializer.Deserialize<CaptureRequest>(ms);
            }



            CollectionAssert.AreEqual(bytes, bytes2);
        }
    }
}
